(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{14:function(e,t,n){e.exports=n(23)},23:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(9),u=n.n(c),l=n(4),i=n.n(l),s=n(7),o=n(3),f=n(5),m=function(){var e=Object(a.useContext)(f.a),t=e.label,n=e.onInputChange,c=e.onFormSubmit;return r.a.createElement("form",{onSubmit:function(e){return c(e)},className:"mb-4"},r.a.createElement("label",{htmlFor:"inputCity"},"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0433\u043e\u0440\u043e\u0434\u0430, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0437\u043d\u0430\u0442\u044c \u043f\u043e\u0433\u043e\u0434\u0443:"),r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("input",{type:"text",id:"inputCity",className:"form-control col-9 mr-2 text-uppercase font-weight-bold",value:t,onChange:function(e){return n(e)}}),r.a.createElement("button",{className:"btn col-3 btn-primary"},"\u0423\u0437\u043d\u0430\u0442\u044c \u043f\u043e\u0433\u043e\u0434\u0443")))},p=n(11),b=function e(){var t=this;Object(p.a)(this,e),this.__getUrl=function(e,t){return"https://api.openweathermap.org/data/2.5/weather?q=".concat(e.toLowerCase(),"&appid=1c3c95e0972967b40cd22c2840f3bf71&units=").concat(t,"&lang=ru")},this.getWeatherByCity=function(){var e=Object(s.a)(i.a.mark((function e(n){var a,r,c=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:"metric",e.next=3,fetch(t.__getUrl(n,a));case 3:return r=e.sent,e.abrupt("return",r.json());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h=n(8),g=function(){var e=Object(a.useContext)(f.a),t=e.lastRequests,n=e.onLastRequestClick,c=e.areThereRequests,u=t.filter((function(e){return e})).reverse().map((function(e,t){return r.a.createElement(h.a.Item,{key:t,bsPrefix:"dropdown-item text-uppercase font-weight-bold",as:"button",onClick:function(){return n(e)}},e)}));return c?r.a.createElement(h.a,null,r.a.createElement(h.a.Toggle,{bsPrefix:"dropdown-toggle btn btn-block btn-primary"},"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b"),r.a.createElement(h.a.Menu,{bsPrefix:"dropdown-menu w-100"},u)):null},d=r.a.lazy((function(){return n.e(5).then(n.bind(null,30))})),x=r.a.lazy((function(){return n.e(3).then(n.bind(null,29))})),y=r.a.lazy((function(){return n.e(4).then(n.bind(null,31))})),E=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)({}),l=Object(o.a)(u,2),p=l[0],h=l[1],E=Object(a.useState)({}),j=Object(o.a)(E,2),v=j[0],O=j[1],w=Object(a.useState)(!1),S=Object(o.a)(w,2),C=S[0],k=S[1],q=Object(a.useState)(!1),I=Object(o.a)(q,2),N=I[0],R=I[1],B=localStorage.getItem("imperialUnits")||!1,L=Object(a.useState)("true"===B),U=Object(o.a)(L,2),W=U[0],J=U[1],P=Object(a.useState)(JSON.parse(localStorage.getItem("lastRequests")||"[]")),_=Object(o.a)(P,2),z=_[0],D=_[1],F=Object(a.useState)(0!==z.length),T=Object(o.a)(F,2),A=T[0],M=T[1],G=new b,H=function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,k(!0);case 3:return e.next=5,R(!1);case 5:return e.next=7,G.getWeatherByCity(n).then((function(e){h(e)}));case 7:return e.next=9,G.getWeatherByCity(n,"imperial").then((function(e){if(O(e),!e.message)if(z.length>=5){var t=z.filter((function(e){return e}));t.push(e.name),t=(t=Array.from(new Set(t))).length>5?t.filter((function(e,t){return t<6&&0!==t})):t.filter((function(e,t){return t<6})),D(t)}else{var n=z.filter((function(){return!0}));n.push(e.name),n=Array.from(new Set(n)),D(n)}c("")}));case 9:return e.next=11,k(!1);case 11:return e.next=13,R(!0);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(!0);case 2:return e.next=4,R(!1);case 4:return e.next=6,G.getWeatherByCity(t).then((function(e){h(e)}));case 6:return e.next=8,G.getWeatherByCity(t,"imperial").then((function(e){O(e)}));case 8:return e.next=10,k(!1);case 10:return e.next=12,R(!0);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){localStorage.setItem("imperialUnits",W.toString())}),[W]),Object(a.useEffect)((function(){localStorage.setItem("lastRequests",JSON.stringify(z)),M(0!==z.length)}),[z]),r.a.createElement(f.a.Provider,{value:{label:n,onInputChange:function(e){c(e.target.value)},onFormSubmit:H,weatherData:p,weatherDataImperial:v,loading:C,loaded:N,imperialUnits:W,onUnitsModeChange:function(e){switch(e.target.value){case"metric":J(!1);break;case"imperial":J(!0);break;default:console.log("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043c\u0435\u043d\u0438\u0442\u044c \u0435\u0434\u0438\u043d\u0438\u0446\u044b")}},lastRequests:z,onLastRequestClick:K,areThereRequests:A}},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"mb-2 d-flex justify-content-between align-items-center"},r.a.createElement(r.a.Suspense,{fallback:r.a.createElement("p",null,"Loading app name...")},r.a.createElement(y,null)),r.a.createElement(r.a.Suspense,{fallback:r.a.createElement("p",null,"Loading units modes...")},r.a.createElement(d,null))),r.a.createElement(m,null),r.a.createElement(r.a.Suspense,{fallback:r.a.createElement("p",null,"Loading weather information...")},r.a.createElement(x,null)),r.a.createElement(g,null)))};u.a.render(r.a.createElement(E,null),document.getElementById("root"))},5:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(0),r=n.n(a).a.createContext()}},[[14,1,2]]]);
//# sourceMappingURL=main.96fb97f2.chunk.js.map